<!DOCTYPE HTML>
<html>
<head>
    <title>Metalmed</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css"/>
    </noscript>
</head>
<body class="is-preload">

<!-- Page Wrapper -->
<div id="page-wrapper">

    <!-- Header -->
    <header id="header">
        <h1><a href="index.html">Metalmed</a></h1>
        <nav id="nav">
            <ul>
                <li class="special">
                    <a href="#menu" class="menuToggle"><span>Menu</span></a>
                    <div id="menu">
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="test.html">Prova ora</a></li>
                            <li><a href="certifications.html">Certificazioni</a></li>
                            <li><a href="contacts.html">Contatti</a></li>
                            <li><a href="#">Entra nel portale</a></li>
                            <li><a href="#">Iscriviti</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Main -->
    <article id="main">
        <header>
            <div class="video-container">
                <video autoplay loop muted playsinline>
                    <source src="videos/sls.mp4" type="video/mp4">
                </video>
            </div>
            <div class="overlay"></div>
            <h3>PROVA DIRETTAMENTE TU IL METODO METALMED</h3>
            <br/>
            <p>Testa il servizio offerta, la qualità del prodotto e le tempistiche di produzione</p>
        </header>
        <section class="wrapper style5">
            <div class="inner">

                <h4>LASER MELTING CROMOCOBALTO BEGO TYPE 5</h4>
                <p>3 Lavorazioni omaggio a tua disposizione, di qualsiasi file si tratti
                </p>

                <h4>LASER MELTING TITANIO GR.23
                </h4>
                <p>1 Lavorazione omaggio a tua disposizione, di qualsiasi file si tratti
                    .</p>

                <h4>FRESAGGIO E RIPRESA
                </h4>
                <p>50% di sconto sul primo ordine e garanzia di rimborso 100% se non soddisfatto.</p>

                <hr/>
            </div>


            <form method="post" id="form-section" class="inner">
                <h4>Form di Contatto</h4>
                <div class="row gtr-uniform ">
                    <!-- Ragione Sociale -->
                    <div class="col-6 col-11-xsmall">
                        <input type="text" name="ragione_sociale" id="ragione_sociale" value=""
                               placeholder="Ragione Sociale" required/>
                    </div>

                    <!-- Nome e Cognome -->
                    <div class="col-6 col-11-xsmall">
                        <input type="text" name="nome_cognome" id="nome_cognome" value="" placeholder="Nome e Cognome"
                               required/>
                    </div>

                    <!-- Telefono -->
                    <div class="col-6 col-11-xsmall">
                        <input type="text" name="phone" id="phone" value="" placeholder="Telefono" required/>
                    </div>

                    <!-- Mail registrazione portale -->
                    <div class="col-6 col-11-xsmall">
                        <input type="email" name="email" id="email" value=""
                               placeholder="Mail Registrazione Portale" required/>
                    </div>

                    <!-- Indirizzo -->
                    <div class="col-12">
                        <input type="text" name="address" id="address" value="" placeholder="Indirizzo" required/>
                    </div>


                    <!-- Partita IVA -->
                    <div class="col-6 col-11-xsmall">
                        <input type="text" name="piva" id="piva" value="" placeholder="Partita IVA"
                               required/>
                    </div>

                    <!-- SDI/PEC -->
                    <div class="col-6 col-11-xsmall">
                        <input type="text" name="email_sdi_pec" id="email_sdi_pec" value="" placeholder="SDI/PEC"
                               required/>
                    </div>

                    <!-- Mail comunicazioni amministrative -->
                    <div class="col-11">
                        <input type="email" name="email_admin_communication" id="email_admin_communication" value=""
                               placeholder="Mail Comunicazioni Amministrative" required/>
                    </div>
                    <!-- Message -->
                    <div class="col-12">
                                <textarea name="message" id="message" placeholder="Scrivi qui il messaggio"
                                          rows="6"></textarea>
                    </div>
                    <!-- Submit and Reset buttons -->
                    <div class="col-11">
                        <ul class="actions">
                            <li><input type="submit" value="Invia Messaggio" class="primary"/></li>
                            <!--                                    <li><input type="reset" value="Reset" /></li>-->
                        </ul>
                    </div>
                </div>
            </form>
        </section>
    </article>
    <!-- Footer -->
    <footer id="footer">
        <ul class="icons">
            <li><span class="icon  solid fa-phone  style1"><span class="label">0432 1598089</span></span> 0432 1598089
            </li>
            <li><span class="icon  solid fa-mail-bulk style1"><span class="label">info@metalmed.eu</span></span>
                info@metalmed.eu
            </li>

        </ul>
        <ul class="copyright">
            <li>Metalmed srl
                030301620309
            </li>
            <li>Via A. Marcuzzi 2/5 Fagagna 33034</li>
        </ul>
    </footer>

</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");

        form.addEventListener("submit", function (event) {
            event.preventDefault();  // Blocca il comportamento predefinito di invio del form

            const formData = new FormData(form);
            const jsonData = Object.fromEntries(formData.entries()); // Converte FormData in JSON

            fetch("http://127.0.0.1:8000/marketing/api/contacts/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(jsonData),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Errore nell'invio del modulo.");
                    }
                    return response.json();
                })
                .then(data => {
                    // Sostituisci il form con un messaggio di successo
                    form.innerHTML = `<h4>Grazie per le informazioni!</h4><p>Il tuo messaggio è stato inviato correttamente.<br/> Verrai ricontatto al più presto</p>`;
                })
                .catch(error => {
                    alert("Si è verificato un errore, riprova più tardi.");
                    console.error("Errore:", error);
                });
        });
    });
</script>

</body>
</html>